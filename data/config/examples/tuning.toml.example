# Generated tuning config example (copy to a real config and edit as needed)

# Rate limits ([rate_limits])
# - max_conns: Maximum simultaneous Stratum connections allowed (checked on accept; requires restart).
# - auto_accept_rate_limits: When true, computes accept throttles from max_conns on startup (overrides explicit accept_* values; requires restart).
# - max_accepts_per_second: Accepts/sec during the initial restart/reconnect window (requires restart).
# - max_accept_burst: Token bucket burst size for accepts (requires restart).
# - accept_reconnect_window: Target seconds for all miners to reconnect after restart (used for auto_accept_rate_limits).
# - accept_burst_window: Initial burst window (seconds) after restart (used for auto_accept_rate_limits).
# - accept_steady_state_window: Seconds after startup before switching to steady-state throttles (requires restart).
# - accept_steady_state_rate: Accepts/sec once steady-state mode activates (requires restart).
# - accept_steady_state_reconnect_percent: Expected % of miners reconnecting during normal operation (used for auto_accept_rate_limits; requires restart).
# - accept_steady_state_reconnect_window: Seconds to spread expected steady-state reconnects across (used for auto_accept_rate_limits; requires restart).
# - stratum_messages_per_minute: Per-connection Stratum messages/min before disconnect (0 disables; requires restart).
#
# Timeouts ([timeouts])
# - connection_timeout_seconds: Disconnect idle miner connections (requires restart).
#
# Difficulty ([difficulty])
# - default_difficulty: Fallback difficulty if no suggest_* arrives during the startup delay (requires restart).
# - min_difficulty / max_difficulty: VarDiff clamp for miner connections; 0 disables that clamp (no limit; requires restart).
# - lock_suggested_difficulty: If true, the first mining.suggest_difficulty / mining.suggest_target locks that connection to the suggested difficulty (disables VarDiff; requires restart). Subsequent suggests are ignored.
# - enforce_suggested_difficulty_limits: If true, ban/disconnect when miner-suggested difficulty is outside min_difficulty/max_difficulty.
#
# Mining ([mining])
# - vardiff_fine: Enable half-step VarDiff adjustments and disable power-of-two snapping (requires restart).
#
# Status UI ([status])
# - mempool_address_url: URL prefix used for external address links in the worker status UI (defaults to "https://mempool.space/address/").
#
# Bans ([bans])
# - clean_expired_on_startup: Remove expired bans from disk on startup (startup-only).
# - ban_invalid_submissions_after: Ban a worker after N invalid submissions within the window (0 disables; requires restart).
# - ban_invalid_submissions_window_seconds: Window size (seconds) for invalid submission counting (requires restart).
# - ban_invalid_submissions_duration_seconds: Ban duration (seconds) when threshold is hit (requires restart).
# - reconnect_ban_threshold: Ban a host after N reconnects within the window (0 disables; requires restart).
# - reconnect_ban_window_seconds: Reconnect ban counting window (seconds; requires restart).
# - reconnect_ban_duration_seconds: Reconnect ban duration (seconds; requires restart).
# - banned_miner_types: List of miner client names or full IDs to disconnect on subscribe (requires restart).
#   Prefer data_dir/config/miner_blacklist.json for managing this list; it overrides this field when present.
#
# Peer cleaning ([peer_cleaning])
# - enabled: If true, goPool may disconnect high-latency peers while refreshing node status.
# - max_ping_ms: Peers above this ping (ms) are candidates for disconnect.
# - min_peers: Minimum number of peers to keep connected.
#

[bans]
  ban_invalid_submissions_after = 60
  ban_invalid_submissions_duration_seconds = 900
  ban_invalid_submissions_window_seconds = 60
  banned_miner_types = []
  clean_expired_on_startup = true
  reconnect_ban_duration_seconds = 3600
  reconnect_ban_threshold = 60
  reconnect_ban_window_seconds = 60

[difficulty]
  default_difficulty = 0.0
  enforce_suggested_difficulty_limits = false
  lock_suggested_difficulty = false
  max_difficulty = 0.0
  min_difficulty = 256.0

[discord]
  worker_notify_threshold_seconds = 300

[hashrate]
  hashrate_ema_min_shares = 10
  hashrate_ema_tau_seconds = 600.0
  ntime_forward_slack_seconds = 7000

[mining]
  disable_pool_job_entropy = false
  vardiff_fine = false

[peer_cleaning]
  enabled = true
  max_ping_ms = 150.0
  min_peers = 20

[rate_limits]
  accept_burst_window = 5
  accept_reconnect_window = 15
  accept_steady_state_rate = 50
  accept_steady_state_reconnect_percent = 5.0
  accept_steady_state_reconnect_window = 60
  accept_steady_state_window = 100
  auto_accept_rate_limits = true
  max_accept_burst = 1000
  max_accepts_per_second = 500
  max_conns = 50000
  stratum_messages_per_minute = 120

[status]
  mempool_address_url = "https://mempool.space/address/"

[timeouts]
  connection_timeout_seconds = 300

[version]
  ignore_min_version_bits = true
  min_version_bits = 1
